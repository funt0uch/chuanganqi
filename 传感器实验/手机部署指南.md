# 传感器工具箱 - 手机部署指南

## 方法一：Web演示版（最简单，无需打包）

### 1.1 本地网络访问（手机和电脑在同一WiFi）

#### 步骤：
1. **在电脑上启动服务器**：
   ```bash
   cd web_demo
   python -m http.server 8000
   ```

2. **查看电脑IP地址**：
   - Windows: 打开命令提示符，输入 `ipconfig`，找到"IPv4 地址"
   - 通常是 `192.168.x.x` 格式

3. **在手机浏览器访问**：
   - 打开手机浏览器（Chrome、Safari等）
   - 输入：`http://你的电脑IP:8000`
   - 例如：`http://192.168.1.100:8000`

4. **添加到主屏幕**（可选）：
   - 在浏览器菜单中选择"添加到主屏幕"
   - 这样就像原生应用一样使用

### 1.2 使用在线托管服务（推荐）

#### 使用GitHub Pages（免费）：
1. 创建GitHub账号（如果没有）
2. 创建新仓库，上传 `web_demo` 文件夹内容
3. 在仓库设置中启用GitHub Pages
4. 访问 `https://你的用户名.github.io/仓库名/`

#### 使用其他免费托管服务：
- **Netlify**: 拖拽 `web_demo` 文件夹到 netlify.com
- **Vercel**: 连接GitHub仓库自动部署
- **Firebase Hosting**: Google的免费托管服务

---

## 方法二：Python版本打包成APK（完整功能）

### 2.1 环境准备

#### Windows用户（需要使用WSL或虚拟机）：
由于Buildozer主要在Linux上运行，Windows用户需要：

**选项A：使用WSL（Windows Subsystem for Linux）**
1. 安装WSL2：
   ```powershell
   wsl --install
   ```

2. 在WSL中安装依赖：
   ```bash
   sudo apt update
   sudo apt install -y python3-pip git unzip openjdk-17-jdk
   pip3 install buildozer cython
   ```

**选项B：使用虚拟机**
- 安装Ubuntu虚拟机
- 在虚拟机中按照Linux步骤操作

#### Linux/Mac用户：
```bash
# 安装依赖
sudo apt update  # Ubuntu/Debian
sudo apt install -y python3-pip git unzip openjdk-17-jdk

# 安装Buildozer
pip3 install buildozer cython
```

### 2.2 配置Android SDK

1. **下载Android SDK Command Line Tools**
   - 访问：https://developer.android.com/studio#command-tools
   - 下载Linux版本

2. **设置环境变量**（在 `~/.bashrc` 或 `~/.zshrc` 中添加）：
   ```bash
   export ANDROID_HOME=$HOME/android-sdk
   export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools
   ```

3. **安装SDK组件**：
   ```bash
   sdkmanager "platform-tools" "platforms;android-34" "build-tools;34.0.0"
   ```

### 2.3 打包APK

1. **进入项目目录**：
   ```bash
   cd /path/to/传感器实验
   ```

2. **首次构建**（会下载很多依赖，需要较长时间）：
   ```bash
   buildozer android debug
   ```

3. **等待构建完成**（可能需要30分钟到1小时）

4. **生成的APK位置**：
   ```
   bin/sensortoolbox-1.0-arm64-v8a-debug.apk
   bin/sensortoolbox-1.0-armeabi-v7a-debug.apk
   ```

### 2.4 安装到手机

#### 方法A：USB连接安装
1. 在手机上启用"开发者选项"和"USB调试"
2. 连接手机到电脑
3. 使用ADB安装：
   ```bash
   adb install bin/sensortoolbox-1.0-arm64-v8a-debug.apk
   ```

#### 方法B：直接传输安装
1. 将APK文件复制到手机（通过USB、云盘、微信等）
2. 在手机上打开文件管理器
3. 点击APK文件安装
4. 允许"安装未知来源应用"

---

## 方法三：使用在线构建服务（无需本地配置）

### 3.1 使用GitHub Actions自动构建

1. 在项目根目录创建 `.github/workflows/build.yml`：
   ```yaml
   name: Build APK
   on: [push]
   jobs:
     build:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v2
         - name: Set up Python
           uses: actions/setup-python@v2
           with:
             python-version: '3.9'
         - name: Install dependencies
           run: |
             pip install buildozer
         - name: Build APK
           run: |
             buildozer android debug
         - name: Upload APK
           uses: actions/upload-artifact@v2
           with:
             name: app-debug
             path: bin/*.apk
   ```

2. 推送到GitHub，会自动构建APK

### 3.2 使用云构建服务
- **Appetize.io**: 在线Android模拟器
- **BrowserStack**: 在线设备测试

---

## 方法四：使用Android Studio（如果熟悉Android开发）

### 4.1 创建新项目
1. 安装Android Studio
2. 创建新的Kivy项目
3. 导入Python代码
4. 配置Gradle构建

### 4.2 使用Python-for-Android
```bash
# 安装python-for-android
pip install python-for-android

# 构建APK
p4a create --requirements=kivy,plyer --arch=arm64-v8a
p4a apk --private . --package=com.sensorlab.sensortoolbox --name "传感器工具箱"
```

---

## 推荐方案对比

| 方案 | 难度 | 时间 | 功能 | 推荐度 |
|------|------|------|------|--------|
| Web版本地网络 | ⭐ 简单 | 5分钟 | 演示功能 | ⭐⭐⭐⭐⭐ |
| Web版在线托管 | ⭐⭐ 中等 | 30分钟 | 演示功能 | ⭐⭐⭐⭐ |
| Buildozer打包 | ⭐⭐⭐⭐ 困难 | 1-2小时 | 完整功能 | ⭐⭐⭐ |
| GitHub Actions | ⭐⭐⭐ 中等 | 1小时 | 完整功能 | ⭐⭐⭐⭐ |

---

## 快速开始（推荐）

### 最简单的方法 - Web版：

1. **电脑上运行**：
   ```bash
   cd web_demo
   python -m http.server 8000
   ```

2. **查看电脑IP**（Windows）：
   ```bash
   ipconfig
   ```

3. **手机浏览器访问**：
   ```
   http://你的IP:8000
   ```

4. **添加到主屏幕**：在浏览器中选择"添加到主屏幕"

---

## 常见问题

### Q: Web版和APK版有什么区别？
A: Web版是演示版本，数据是模拟的；APK版可以访问真实传感器数据。

### Q: 为什么Buildozer在Windows上不能用？
A: Buildozer主要支持Linux，Windows需要使用WSL或虚拟机。

### Q: 打包APK需要多长时间？
A: 首次构建需要30分钟到1小时，因为要下载很多依赖。

### Q: 手机浏览器打不开Web版？
A: 确保手机和电脑在同一WiFi网络，检查防火墙设置。

---

## 需要帮助？

如果遇到问题，可以：
1. 查看项目文档
2. 检查错误日志
3. 参考Kivy和Buildozer官方文档

