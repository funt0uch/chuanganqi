# GitHub Actions构建失败排查指南

## 查看错误详情

### 步骤1：点击失败的workflow
1. 在Actions页面，点击任意一个红色❌标记的workflow
2. 会显示详细的运行日志

### 步骤2：查看错误信息
1. 点击失败的步骤（通常是红色的）
2. 展开查看详细错误信息
3. 找到关键错误行（通常有"Error"或"Failed"标记）

## 常见错误及解决方案

### 错误1：找不到buildozer.spec文件

**错误信息**：
```
buildozer.spec not found
```

**解决方案**：
1. 确保项目根目录有`buildozer.spec`文件
2. 如果文件在本地，需要上传到GitHub
3. 检查文件路径是否正确

### 错误2：缺少Python文件

**错误信息**：
```
ModuleNotFoundError: No module named 'sensors'
```

**解决方案**：
1. 确保`main.py`和`sensors/`文件夹都已上传
2. 检查`.gitignore`是否排除了这些文件
3. 确保文件结构正确

### 错误3：依赖安装失败

**错误信息**：
```
ERROR: Could not install packages
```

**解决方案**：
- 这通常是网络问题，GitHub Actions会自动重试
- 如果持续失败，可能需要添加重试机制

### 错误4：Android SDK下载失败

**错误信息**：
```
Failed to download Android SDK
```

**解决方案**：
- Buildozer会自动下载SDK，首次构建需要较长时间
- 等待重试或检查网络连接

## 快速修复步骤

### 方法1：检查文件是否都上传了

确保以下文件都在GitHub仓库中：

```
项目根目录/
├── main.py
├── sensors/
│   ├── __init__.py
│   ├── accelerometer.py
│   ├── compass.py
│   ├── light.py
│   ├── gyroscope.py
│   └── orientation.py
├── buildozer.spec
├── requirements.txt
└── .github/workflows/build.yml
```

### 方法2：查看具体错误

1. 点击最新的失败workflow（最上面的）
2. 点击"Build APK with Buildozer"步骤
3. 查看错误输出
4. 复制错误信息

### 方法3：简化workflow测试

如果持续失败，可以先测试一个简化版本：

```yaml
name: Test Build

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: List files
      run: |
        ls -la
        echo "Files in repository:"
        find . -type f -name "*.py" | head -20
```

## 需要帮助？

请提供：
1. 点击失败workflow后的错误日志
2. 特别是"Build APK with Buildozer"步骤的错误信息
3. 我可以帮你分析具体问题

